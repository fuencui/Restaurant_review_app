{"ast":null,"code":"import _asyncToGenerator from\"/Users/fuencui/Desktop/1fuen-cui-project3/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/fuencui/Desktop/1fuen-cui-project3/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/fuencui/Desktop/1fuen-cui-project3/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{Navbar,Container,Nav,NavDropdown,Button,Form,FormControl}from\"react-bootstrap\";import'bootstrap/dist/css/bootstrap.min.css';import{useState}from\"react\";import{useEffect}from\"react\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import'./NavBar.css';import InsertDish from'./InsertDish';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function NavBar(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),formInput=_useState2[0],setFormInput=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var navigate=useNavigate();useEffect(function(){axios.get('/api/user/isLoggedIn').then(function(response){return setUsername(response.data.username);}).catch(function(error){return console.log(\"User is not logged in \"+username);});},[username]);function logout(){return _logout.apply(this,arguments);}function _logout(){_logout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var promise,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:promise=new Promise(function(resolve,reject){axios.post('/api/user/logout').then(function(reponse){resolve(null);}).catch(function(error){return reject('Error logging out');});});_context.next=3;return promise;case 3:result=_context.sent;if(result===null){setUsername(result);navigate('/');}case 5:case\"end\":return _context.stop();}}},_callee);}));return _logout.apply(this,arguments);}function handleSearch(){navigate('/search/'+formInput);}function underDropDown(){if(username){return/*#__PURE__*/_jsxs(NavDropdown,{title:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-person-check-fill\",children:username}),id:\"navbarScrollingDropdown\",children:[/*#__PURE__*/_jsx(NavDropdown.Item,{href:\"/userAccount/\"+username,children:\"User Account\"}),/*#__PURE__*/_jsx(NavDropdown.Item,{href:\"#action4\",children:\"My Reviews\"}),/*#__PURE__*/_jsx(NavDropdown.Item,{onClick:logout,children:\"Log Out\"})]});}else{return/*#__PURE__*/_jsxs(NavDropdown,{title:\"Register Or Log In\",id:\"navbarScrollingDropdown\",children:[/*#__PURE__*/_jsx(NavDropdown.Item,{href:\"/createUser\",children:\"Create New Account\"}),/*#__PURE__*/_jsx(NavDropdown.Item,{href:\"/login\",children:\"Log In\"})]});}}function ableToReviews(){if(username){return/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(InsertDish,{})});}}function handleKeyPress(event){if(event.key==='Enter'){navigate('/search/'+formInput);}}return/*#__PURE__*/_jsx(\"div\",{className:\"navBar\",children:/*#__PURE__*/_jsx(Navbar,{bg:\"light\",expand:\"lg\",children:/*#__PURE__*/_jsxs(Container,{fluid:true,className:\"nana\",children:[/*#__PURE__*/_jsxs(Navbar.Brand,{href:\"/\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-camera-fill\"}),\" FoodReviewApp\"]}),/*#__PURE__*/_jsx(Navbar.Toggle,{\"aria-controls\":\"navbarScroll\"}),/*#__PURE__*/_jsxs(Navbar.Collapse,{id:\"navbarScroll\",children:[/*#__PURE__*/_jsxs(Nav,{className:\"me-auto my-2 my-lg-0\",style:{maxHeight:'100px'},navbarScroll:true,children:[/*#__PURE__*/_jsx(Nav.Link,{href:\"/\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-shop\",children:\"Home\"})}),underDropDown(),ableToReviews()]}),/*#__PURE__*/_jsxs(Form,{className:\"d-flex\",children:[/*#__PURE__*/_jsx(FormControl,{type:\"text\",value:formInput,onChange:function onChange(e){return setFormInput(e.target.value);},onKeyPress:function onKeyPress(e){return handleKeyPress(e);},placeholder:\"Search\",className:\"me-2\",\"aria-label\":\"Search\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSearch,variant:\"outline-success\",children:\"Search\"})]})]})]})})});}","map":{"version":3,"sources":["/Users/fuencui/Desktop/1fuen-cui-project3/src/NavBar.jsx"],"names":["React","Navbar","Container","Nav","NavDropdown","Button","Form","FormControl","useState","useEffect","axios","useNavigate","InsertDish","NavBar","props","formInput","setFormInput","username","setUsername","navigate","get","then","response","data","catch","error","console","log","logout","promise","Promise","resolve","reject","post","reponse","result","handleSearch","underDropDown","ableToReviews","handleKeyPress","event","key","maxHeight","e","target","value"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Navbar, Container, Nav, NavDropdown, Button, Form, FormControl} from \"react-bootstrap\"; \nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport './NavBar.css';\nimport InsertDish from './InsertDish';\n\n\nexport default function NavBar(props) {\n    const [formInput, setFormInput] = useState('');\n    const [username, setUsername] = useState(null);\n    const navigate = useNavigate();\n\n    useEffect(function() {\n        axios.get('/api/user/isLoggedIn')\n        .then(response => setUsername(response.data.username))\n        .catch(error => console.log(\"User is not logged in \" + username));\n    }, [username])\n\n    async function logout(){\n        let promise = new Promise((resolve, reject) => {\n            axios.post('/api/user/logout')\n            .then(reponse => {\n                resolve(null);\n            })\n            .catch(error => reject('Error logging out'));\n        });\n        let result = await promise;\n        if (result === null){\n            setUsername(result);\n            navigate('/')\n        }\n    }\n\n    function handleSearch(){\n        navigate('/search/' + formInput)\n        \n    }\n\n\n    function underDropDown(){\n        if (username){\n            return (\n                <NavDropdown title={<i className=\"bi bi-person-check-fill\">{username}</i>} id=\"navbarScrollingDropdown\">\n                <NavDropdown.Item href={\"/userAccount/\" + username} >User Account</NavDropdown.Item>\n                <NavDropdown.Item href=\"#action4\">My Reviews</NavDropdown.Item>\n                <NavDropdown.Item onClick={logout}>Log Out</NavDropdown.Item>\n                </NavDropdown>\n                \n            )\n        } else {\n            return (\n                <NavDropdown title='Register Or Log In' id=\"navbarScrollingDropdown\">\n                <NavDropdown.Item href='/createUser'>Create New Account</NavDropdown.Item>\n                <NavDropdown.Item href=\"/login\">Log In</NavDropdown.Item>\n                </NavDropdown>\n            )\n        }\n    }\n\n    function ableToReviews(){\n        if (username){\n            return <Nav.Item><InsertDish/></Nav.Item>\n        }\n    }\n\n    function handleKeyPress(event) {\n        if(event.key === 'Enter'){\n            navigate('/search/' + formInput)\n        }\n      }\n\n    return (\n        <div className='navBar'>\n        <Navbar bg=\"light\" expand=\"lg\" >\n        <Container fluid className=\"nana\">\n            <Navbar.Brand href=\"/\"><i className=\"bi bi-camera-fill\"></i> FoodReviewApp</Navbar.Brand>\n            <Navbar.Toggle aria-controls=\"navbarScroll\" />\n            <Navbar.Collapse id=\"navbarScroll\">\n            <Nav\n                className=\"me-auto my-2 my-lg-0\"\n                style={{ maxHeight: '100px' }}\n                navbarScroll\n            >\n                <Nav.Link href=\"/\"><i className=\"bi bi-shop\">Home</i></Nav.Link>\n                {underDropDown()}\n                {ableToReviews()}\n            </Nav>\n            \n            <Form className=\"d-flex\">\n                <FormControl\n                type=\"text\"\n                value={formInput}\n                onChange={(e) => setFormInput(e.target.value)}\n                onKeyPress={(e) => handleKeyPress(e)}\n                placeholder=\"Search\"\n                className=\"me-2\"\n                aria-label=\"Search\"\n                \n                />\n                <Button onClick={handleSearch}\n                variant=\"outline-success\"\n                >\n                Search</Button>\n            </Form>\n            </Navbar.Collapse>\n        </Container>\n        </Navbar>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}